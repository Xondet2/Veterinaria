<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="678px" preserveAspectRatio="none" style="width:723px;height:678px;background:#FFFFFF;" version="1.1" viewBox="0 0 723 678" width="723px" zoomAndPan="magnify"><title>Secuencia: Login y uso de JWT</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="210.0342" x="258.1023" y="29.5332">Secuencia: Login y uso de JWT</text><rect fill="none" height="139.7578" style="stroke:#000000;stroke-width:1.5;" width="586.1772" x="131.0615" y="333.3281"/><rect fill="none" height="92.0547" style="stroke:#000000;stroke-width:1.5;" width="358.189" x="131.0615" y="487.0859"/><g><title>Usuario</title><rect fill="#000000" fill-opacity="0.00000" height="474.9219" width="8" x="28.1206" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="32" x2="32" y1="121.2188" y2="596.1406"/></g><g><title>Frontend</title><rect fill="#000000" fill-opacity="0.00000" height="474.9219" width="8" x="172.0786" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="176.0615" x2="176.0615" y1="121.2188" y2="596.1406"/></g><g><title>Backend</title><rect fill="#000000" fill-opacity="0.00000" height="474.9219" width="8" x="441.0093" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="444.7681" x2="444.7681" y1="121.2188" y2="596.1406"/></g><g><title>Security</title><rect fill="#000000" fill-opacity="0.00000" height="474.9219" width="8" x="670.9526" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="674.6665" x2="674.6665" y1="121.2188" y2="596.1406"/></g><g class="participant participant-head" data-participant="Usuario"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48.2412" x="5" y="118.1426">Usuario</text><ellipse cx="32.1206" cy="52.1094" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M32.1206,60.1094 L32.1206,87.1094 M19.1206,68.1094 L45.1206,68.1094 M32.1206,87.1094 L19.1206,102.1094 M32.1206,87.1094 L45.1206,102.1094" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Usuario"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48.2412" x="5" y="609.6738">Usuario</text><ellipse cx="32.1206" cy="621.25" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M32.1206,629.25 L32.1206,656.25 M19.1206,637.25 L45.1206,637.25 M32.1206,656.25 L19.1206,671.25 M32.1206,656.25 L45.1206,671.25" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="FE"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.0342" x="141.0615" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0342" x="148.0615" y="110.1426">Frontend</text></g><g class="participant participant-tail" data-participant="FE"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.0342" x="141.0615" y="595.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0342" x="148.0615" y="616.6738">Frontend</text></g><g class="participant participant-head" data-participant="BE"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.4824" x="410.7681" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.4824" x="417.7681" y="110.1426">Backend</text></g><g class="participant participant-tail" data-participant="BE"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.4824" x="410.7681" y="595.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.4824" x="417.7681" y="616.6738">Backend</text></g><g class="participant participant-head" data-participant="SEC"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.5723" x="642.6665" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.5723" x="649.6665" y="110.1426">Security</text></g><g class="participant participant-tail" data-participant="SEC"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.5723" x="642.6665" y="595.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.5723" x="649.6665" y="616.6738">Security</text></g><g class="message" data-participant-1="Usuario" data-participant-2="FE"><polygon fill="#181818" points="164.0786,149.5703,174.0786,153.5703,164.0786,157.5703,168.0786,153.5703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="32.1206" x2="170.0786" y1="153.5703" y2="153.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.958" x="39.1206" y="148.7139">Ingresa credenciales</text></g><g class="message" data-participant-1="FE" data-participant-2="BE"><polygon fill="#181818" points="433.0093,179.9219,443.0093,183.9219,433.0093,187.9219,437.0093,183.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="176.0786" x2="439.0093" y1="183.9219" y2="183.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226.1797" x="183.0786" y="179.0654">POST /api/auth/login {email, password}</text></g><g class="message" data-participant-1="BE" data-participant-2="SEC"><polygon fill="#181818" points="662.9526,210.2734,672.9526,214.2734,662.9526,218.2734,666.9526,214.2734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="445.0093" x2="668.9526" y1="214.2734" y2="214.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.0508" x="452.0093" y="209.417">Autenticaci&#243;n (BCrypt)</text></g><g class="message" data-participant-1="SEC" data-participant-2="BE"><polygon fill="#181818" points="456.0093,240.625,446.0093,244.625,456.0093,248.625,452.0093,244.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="450.0093" x2="673.9526" y1="244.625" y2="244.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.3198" x="462.0093" y="239.7686">Genera JWT {sub=id, rol}</text></g><g class="message" data-participant-1="BE" data-participant-2="FE"><polygon fill="#181818" points="187.0786,270.9766,177.0786,274.9766,187.0786,278.9766,183.0786,274.9766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="181.0786" x2="444.0093" y1="274.9766" y2="274.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.1816" x="193.0786" y="270.1201">200 OK {token}</text></g><g class="message" data-participant-1="FE" data-participant-2="FE"><line style="stroke:#181818;stroke-width:1;" x1="176.0786" x2="218.0786" y1="305.3281" y2="305.3281"/><line style="stroke:#181818;stroke-width:1;" x1="218.0786" x2="218.0786" y1="305.3281" y2="318.3281"/><line style="stroke:#181818;stroke-width:1;" x1="177.0786" x2="218.0786" y1="318.3281" y2="318.3281"/><polygon fill="#181818" points="187.0786,314.3281,177.0786,318.3281,187.0786,322.3281,183.0786,318.3281" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.7261" x="183.0786" y="300.4717">Guarda token en localStorage</text></g><path d="M131.0615,333.3281 L203.4961,333.3281 L203.4961,341.6797 L193.4961,351.6797 L131.0615,351.6797 L131.0615,333.3281" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="139.7578" style="stroke:#000000;stroke-width:1.5;" width="586.1772" x="131.0615" y="333.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27.4346" x="146.0615" y="347.8232">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="124.7114" x="218.4961" y="346.7471">[llamadas autenticadas]</text><g class="message" data-participant-1="FE" data-participant-2="BE"><polygon fill="#181818" points="433.0093,370.0313,443.0093,374.0313,433.0093,378.0313,437.0093,374.0313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="176.0786" x2="439.0093" y1="374.0313" y2="374.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244.9307" x="183.0786" y="369.1748">GET /api/mascotas (Authorization: Bearer)</text></g><g class="message" data-participant-1="BE" data-participant-2="SEC"><polygon fill="#181818" points="662.9526,400.3828,672.9526,404.3828,662.9526,408.3828,666.9526,404.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="445.0093" x2="668.9526" y1="404.3828" y2="404.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.7725" x="452.0093" y="399.5264">JwtAuthenticationFilter valida token</text></g><g class="message" data-participant-1="SEC" data-participant-2="BE"><polygon fill="#181818" points="456.0093,430.7344,446.0093,434.7344,456.0093,438.7344,452.0093,434.7344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="450.0093" x2="673.9526" y1="434.7344" y2="434.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.9434" x="462.0093" y="429.8779">Principal=id, Authority=ROLE_&lt;rol&gt;</text></g><g class="message" data-participant-1="BE" data-participant-2="FE"><polygon fill="#181818" points="187.0786,461.0859,177.0786,465.0859,187.0786,469.0859,183.0786,465.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="181.0786" x2="444.0093" y1="465.0859" y2="465.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.6816" x="193.0786" y="460.2295">200 OK {data}</text></g><path d="M131.0615,487.0859 L191.2324,487.0859 L191.2324,495.4375 L181.2324,505.4375 L131.0615,505.4375 L131.0615,487.0859" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="92.0547" style="stroke:#000000;stroke-width:1.5;" width="358.189" x="131.0615" y="487.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="146.0615" y="501.5811">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130.1846" x="206.2324" y="500.5049">[token inv&#225;lido/expirado]</text><g class="message" data-participant-1="BE" data-participant-2="FE"><polygon fill="#181818" points="187.0786,523.7891,177.0786,527.7891,187.0786,531.7891,183.0786,527.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="181.0786" x2="444.0093" y1="527.7891" y2="527.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46.9917" x="193.0786" y="522.9326">401/403</text></g><g class="message" data-participant-1="FE" data-participant-2="FE"><line style="stroke:#181818;stroke-width:1;" x1="176.0786" x2="218.0786" y1="558.1406" y2="558.1406"/><line style="stroke:#181818;stroke-width:1;" x1="218.0786" x2="218.0786" y1="558.1406" y2="571.1406"/><line style="stroke:#181818;stroke-width:1;" x1="177.0786" x2="218.0786" y1="571.1406" y2="571.1406"/><polygon fill="#181818" points="187.0786,567.1406,177.0786,571.1406,187.0786,575.1406,183.0786,571.1406" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.1353" x="183.0786" y="553.2842">limpia token y redirige /login</text></g><!--SRC=[RPB1QXin48RlUeev9f2mRfEJQGBTi3P90mvrGevXAWtEK5bQHjgaM-E7wJFq4V9Y7QtNO4D1bzK_-kV_PZPpzWHBiXq5opY5-xZY03rqAO8Zk7j-D0PjZW9FgKFXQ5gKp9PR31bc4aEcu00Jp9eZgKRxSrJgOwLq4yvzaPRDZJ6ZCvnVgyaKRiDAA25O8JUayfJCh2bohVB3Ola85RPSOPTVApy4tj0QsPz1YoczHt5RKmyFr7yANplDgEtHyiVV02VrZVHjFZKgmldeEgT0WeKNDgdxSSNk32JwdSyOxFDa0ejliCbHoRPZf2BCDRz36Ev1ZuyM_LA7XYioniVOWlUuHgV4k0-Z7mTKysQ4McEoCMlXYSP-ZSA_CNCCKwW9XUJq4EpkFPUYdL-fch7F9F26dlTvZYWVX4FPWX_unWQvl_g-k6zUlYZlzVzu7MRS6bsc_We-ZvWStZx-Q9jOqQ-M1LqyV7ev-LHTJYuEPkHvtV9-HZteRbbuHR1RO77_1m00]--></g></svg>